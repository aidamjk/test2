"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1527],{81527:function(e,t,n){n.d(t,{L:function(){return R}});var i=n(26042),r=n(69396),a=n(67294),o=n(14924),u=n(99534),l=n(828),s=n(29815),d=n(87146),c=n(73286),f=n(55346);var v=n(57258),g=n(34351),p=n(49725),Z=n(11163),m={},h={items:m,pages:m,data:{},fetched:!1};function O(e){var t=e.apiMethod,n=e.apiData,u=e.queryParams,d=e.disabled,O=void 0!==d&&d,y=e.onSuccess,S=e.onError,M=e.itemsKey,C=void 0===M?"products":M,E=e.isPagination,I=void 0!==E&&E,R=e.ssrData,w=e.notHandledByUseSSR,b=void 0!==w&&w,x=e.onPageChange,K=(0,Z.useRouter)(),k=(0,a.useRef)(null),D=(0,a.useRef)(!1),F=(0,a.useState)(u.page||1),q=F[0],T=F[1],Q=(0,a.useState)(P({oldData:h,newPage:R,itemsKey:C})),H=Q[0],V=Q[1];(0,a.useEffect)((function(){(null===u||void 0===u?void 0:u.page)&&q!==u.page&&T(null===u||void 0===u?void 0:u.page)}),[null===u||void 0===u?void 0:u.page]);var A=(0,a.useMemo)((function(){var e=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pager;if(!((0,f.k)(e)||+e.pagerCurrentPage<1||+e.pagerCurrentPage>=+e.pagerTotalPages))return e.pagerCurrentPage+1}(H.data),t=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pager;if(!((0,f.k)(e)||+e.pagerCurrentPage<2||+e.pagerCurrentPage>=+e.pagerTotalPages))return e.pagerCurrentPage-1}(H.data);return{nextPageParam:e,hasNextPage:!!e,previousPageParam:t,hasPreviousPage:!!t}}),[H.data]),j=A.nextPageParam,N=A.hasNextPage,U=A.previousPageParam,L=A.hasPreviousPage,B=(0,a.useMemo)((function(){return(0,i.Z)({},(0,c.cleanObject)((0,i.Z)({},n||{},u||{})))}),[n,u]),X=(0,a.useRef)(B),_=(0,a.useMemo)((function(){return(0,r.Z)((0,i.Z)({},B),(0,o.Z)({},g.tn,u.page||q))}),[B,q]),Y=(0,a.useRef)(!1),z=(0,a.useRef)(b),G=(0,a.useRef)(B),W=O||!b&&(D.current||!z.current||(0,p.Xy)(B,G.current)&&1===q),$=I||1===q||Y.current||u.page,J=function(e){if(e&&(0,c.isEmpty)(e))V((function(e){return(0,r.Z)((0,i.Z)({},e),{fetched:!0,items:$?[]:e.items})}));else{var t=function(e){var t=e.newPage,n=e.reset,a=P({oldData:(0,r.Z)((0,i.Z)({},H),{items:$||n?m:H.items}),newPage:t,itemsKey:C});return V(a),a}({newPage:e});X.current=B,Y.current=!1,D.current=!1,null===y||void 0===y||y(e,t)}},ee=(0,v.V)({apiMethod:t,apiData:_,onSuccess:J,onError:S,disabled:W}),te=ee.pending,ne=ee.hasError,ie=ee.reload;(0,a.useEffect)((function(){(0,f.k)(R)||b||z.current||(J(R),z.current=!0,G.current=(0,i.Z)({},B))}),[R]),(0,a.useEffect)((function(){var e=function(e){var t=new URL(e,window.location.href).pathname;D.current=!(0,p.Xy)(k.current,t),k.current=t};return K.events.on("routeChangeStart",e),function(){K.events.off("routeChangeStart",e)}}),[]),(0,a.useEffect)((function(){ae({page:(null===u||void 0===u?void 0:u.page)||1})}),[K.asPath]),(0,a.useEffect)((function(){W&&!b&&(z.current||(0,p.Xy)(G.current,B))?J(R):Y.current=!(0,p.Xy)(B,X.current)}),[B]);var re=function(e){(0,c.isNumber)(e)&&T(e)},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,n=void 0===t?1:t,a=e.updatePageParam,o=void 0!==a&&a;V((0,r.Z)((0,i.Z)({},H),{fetched:!1,items:[]})),o?null===x||void 0===x||x(n):q===n?ie():re(n)},oe=(te||!H.fetched||Y.current)&&!ne;return(0,r.Z)((0,i.Z)({},H),{items:$&&oe?m:H.items,hasError:ne,pending:oe,hasPreviousPage:L,hasNextPage:N,fetchNextPage:function(){N&&T(j)},fetchPreviousPage:function(){L&&T(U)},fetchPage:re,addItem:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];V((function(e){var n=(0,i.Z)({},(null===e||void 0===e?void 0:e.items)||{});return t.forEach((function(e){var t=e.page,i=e.index,r=e.item;n[t]=(0,p.QO)(n[t],i,r)})),(0,r.Z)((0,i.Z)({},e),{items:n})}))},removeItem:function(e){var t=e.itemIndex;V((function(e){var n,a=Object.entries(null===e||void 0===e?void 0:e.items).reduce((function(e,n){var i=(0,l.Z)(n,2),r=i[0],a=i[1];return e.isFound?e:t<a.length+e.count?{page:r,index:t-e.count,isFound:!0}:{count:e.count+a.length}}),{count:0}),u=a.page,d=a.index,c=(0,r.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.items),(0,o.Z)({},u,(0,s.Z)((0,p.As)(null===e||void 0===e||null===(n=e.items)||void 0===n?void 0:n[u],d))));return(0,r.Z)((0,i.Z)({},e),{items:c})}))},updateItem:function(e){var t=e.itemIndex,n=e.newData;V((function(e){var a,u,d,c=Object.entries(null===e||void 0===e?void 0:e.items).reduce((function(e,n){var i=(0,l.Z)(n,2),r=i[0],a=i[1];return e.isFound?e:t<a.length+e.count?{page:r,index:t-e.count,isFound:!0}:{count:e.count+a.length}}),{count:0}),f=c.page,v=c.index,g=(0,r.Z)((0,i.Z)({},null===e||void 0===e?void 0:e.items),(0,o.Z)({},f,(0,s.Z)((0,p.Ht)(null===e||void 0===e||null===(a=e.items)||void 0===a?void 0:a[f],(0,i.Z)({},(null===e||void 0===e||null===(u=e.items)||void 0===u||null===(d=u[f])||void 0===d?void 0:d[v])||{},n),v))));return(0,r.Z)((0,i.Z)({},e),{items:g})}))},resetItems:ae,page:q,apiData:_,isAPIDataChangedRef:Y})}function P(e){var t,n=e.oldData,a=n.items,u=void 0===a?m:a,l=n.data,s=n.pages,d=void 0===s?m:s,c=e.newPage,v=e.itemsKey,g=(null===c||void 0===c||null===(t=c.pager)||void 0===t?void 0:t.pagerCurrentPage)||1;return{items:(0,r.Z)((0,i.Z)({},u),(0,o.Z)({},g,(null===c||void 0===c?void 0:c[v])||[])),data:y({data:c,itemsKey:v,oldData:l}),pages:(0,r.Z)((0,i.Z)({},d),(0,o.Z)({},g,g)),fetched:!(0,f.k)(c)}}function y(e){var t=e.data,n=e.itemsKey,i=e.oldData;if(!(0,c.isObject)(t)||(0,c.isArray)(t)||(0,f.k)(t)||(0,c.isEmpty)(t))return i;t[n];return(0,u.Z)(t,[n].map(d.Z))}var S=n(66261),M=n(72593),C={isOpen:!1,filterKey:null,filterTitle:null,filterItem:null},E={};function I(e){var t=e.defaultActiveFilters,n=void 0===t?E:t,v=e.shouldSaveOnChange,m=e.shouldScrollOnChange,h=void 0===m||m,O=e.disableQueryParams,P=function(e){var t,a=e.activeFilters,u=void 0===a?n:a,l=e.shallow,s=e.fragment,d=(0,c.cleanObject)((0,r.Z)((0,i.Z)({},u),(t={},(0,o.Z)(t,g.uR,u[g.uR]||L[g.uR]),(0,o.Z)(t,g.fH,L[g.fH]),(0,o.Z)(t,g.tn,void 0),t)));ve({newUrl:(0,M.mn)((0,c.setQueries)({queries:d,url:window.location.pathname}),s),scroll:h,shallow:l})},y=function(){$(!1)},I=function(e){var t=e.shallow;y(),P({activeFilters:Y,shallow:t})},R=function(){y()},w=function(){P({activeFilters:(0,o.Z)({},g.uR,ae)}),y()},b=function(){le(!1)},x=function(){ne((0,r.Z)((0,i.Z)({},Y),(0,o.Z)({},g.uR,ae))),b()},K=function(){ne((0,r.Z)((0,i.Z)({},Y),(0,o.Z)({},g.uR,ae))),b()},k=function(){fe(!1)},D=(0,Z.useRouter)(),F=D.asPath,q=D.push,T=D.replace,Q=D.query,H=D.pathname,V=D.isReady,A=(D.events,(0,a.useState)((0,i.Z)({},n))),j=A[0],N=A[1],U=(0,a.useRef)(!1),L=(0,a.useMemo)((function(){return O?j:(0,c.getSearchParams)(F)}),[F,j]),B=(0,a.useMemo)((function(){L[g.uR],L[g.fH],L[g.tn];var e=(0,u.Z)(L,[g.uR,g.fH,g.tn].map(d.Z));return!(0,c.isEmpty)(e)}),[L]),X=(0,a.useMemo)((function(){return Object.entries(Q).reduce((function(e,t){var n=(0,l.Z)(t,2),a=n[0],u=n[1];return-1!==H.indexOf(a)?(0,r.Z)((0,i.Z)({},e),(0,o.Z)({},a,u)):(0,i.Z)({},e)}),{})}),[H,Q]),_=(0,a.useState)(n),Y=_[0],z=_[1],G=(0,a.useState)(!1),W=G[0],$=G[1],J=(0,a.useState)(C),ee=J[0],te=J[1],ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;return z((function(){return(0,c.isFunction)(e)?function(t){return(0,c.cleanObject)(e(t))}:(0,c.cleanObject)(e)}))},ie=(0,a.useMemo)((function(){return!(0,p.Xy)(L,Y)}),[Y,L]),re=null===Y||void 0===Y?void 0:Y[g.uR],ae=null===L||void 0===L?void 0:L[g.uR],oe=(0,a.useState)(!1),ue=oe[0],le=oe[1],se=(0,a.useMemo)((function(){return!(0,c.isEqualString)(ae,re)}),[re,ae]),de=(0,a.useState)(!1),ce=de[0],fe=de[1],ve=function(e){var t=e.newUrl,n=e.scroll,r=e.shallow,a=void 0===r||r,o=e.appendQuery,u=void 0!==o&&o;if(O){var l=(0,c.getSearchParams)(t);return N((0,i.Z)({},u?L:E,l)),void(n&&S.NY.scrollToTop())}U.current?(U.current=!0,n&&S.NY.scrollToTop(),q(t,void 0,{scroll:!!(null!==n&&void 0!==n?n:h),shallow:a})):T(t,void 0,{scroll:!!(null!==n&&void 0!==n?n:h),shallow:a})},ge=function(e){var t,n=e.query;ve({newUrl:(0,c.setQueries)({queries:(t={},(0,o.Z)(t,g.fH,n),(0,o.Z)(t,g.tn,void 0),t),url:window.location.pathname}),scroll:!0})},pe=function(){var e=(0,c.cleanObject)((0,i.Z)({},n||E,L));ne(e)};(0,a.useEffect)((function(){pe()}),[F,j]);var Ze=(0,a.useMemo)((function(){return(0,M.S3)(F)}),[F]);return{filterExtra:ee,activeFilters:Y,filterOnClick:function(e){var t=e.isOpenable,n=e.filterKey,r=e.filterItem,a=e.filterType,u=e.filterTitle,l=e.filterOptionId,d=e.filterOptionMax,p=e.filterOptionMin,Z=e.filterOptionValueMin,m=e.filterOptionValueMax,h=e.shouldSendDataToServer,O=e.shallow;if(t)te((function(e){var t=e.isOpen,i=e.filterKey;return{isOpen:!(t&&(0,c.isEqualString)(n,i)),filterTitle:u,filterKey:n,filterItem:r}}));else{var y=function(e){var t,n=e.filterKey,r=e.filterType,a=e.activeFilters,u=e.filterOptionId,l=e.filterOptionMin,d=e.filterOptionMax,v=e.filterOptionValueMin,p=e.filterOptionValueMax,Z=(0,c.isObject)(n),m=Z?n.keyId:n,h=null===n||void 0===n?void 0:n.keyCode,O=(null===a||void 0===a?void 0:a[h])||E,P=Z?null===(t=a[h])||void 0===t?void 0:t[m]:a[n];if((0,c.isEqualString)(g.kQ.CHECKBOX,r)){var y=function(e){var t,n=e.filterOptionId,i=e.filterItem,r=e.filterKey;if(null===i||void 0===i||null===(t=i.find)||void 0===t?void 0:t.call(i,(function(e){return(0,c.isEqualString)(e,n)}))){var a,u=null===i||void 0===i||null===(a=i.filter)||void 0===a?void 0:a.call(i,(function(e){return!(0,c.isEqualString)(e,n)}));return(0,o.Z)({},r,(0,c.isEmpty)(u)?void 0:u)}return(0,o.Z)({},r,(0,s.Z)(i||[]).concat([n]))}({filterItem:P,filterKey:m,filterOptionId:u});return(0,i.Z)({},a||E,Z?(0,o.Z)({},h,(0,i.Z)({},O,y)):y)}if([g.kQ.RADIO,g.kQ.BUTTON].includes(r)){var S=function(e){var t=e.filterKey,n=e.filterOptionId;return(0,o.Z)({},t,n)}({filterItem:P,filterKey:n,filterOptionId:u});return(0,i.Z)({},a||E,Z?(0,o.Z)({},h,(0,i.Z)({},O,S)):S)}if((0,c.isEqualString)(g.kQ.SLIDER,r)){var M=function(e){var t,n=e.filterOptionMin,i=e.filterOptionMax,r=e.filterOptionValueMin,a=e.filterOptionValueMax,u=e.filterKey,l=(0,c.isEqualString)(i,a)&&(0,c.isEqualString)(n,r);return(0,o.Z)({},u,l?void 0:(t={},(0,o.Z)(t,g.LS,r),(0,o.Z)(t,g.o$,a),t))}({filterKey:n,filterOptionMax:d,filterOptionMin:l,filterOptionValueMin:v,filterOptionValueMax:p});return(0,i.Z)({},a||E,Z?(0,o.Z)({},h,(0,i.Z)({},O,M)):M)}if([g.kQ.BOOLEAN,g.kQ.SWITCH].includes(r)){var C=function(e){var t=e.filterItem,n=e.filterKey,i=e.filterOptionId;return(0,o.Z)({},n,(0,f.k)(t)?i:void 0)}({filterItem:P,filterKey:n,filterOptionId:u});return(0,i.Z)({},a||E,Z?(0,o.Z)({},h,(0,i.Z)({},O,C)):C)}if((0,c.isEqualString)(g.kQ.CATEGORY_LIST,r)){var I=function(e){var t=e.filterKey,n=e.filterOptionId;return(0,o.Z)({},t,(0,f.k)(n)?void 0:[n])}({filterKey:n,filterOptionId:u});return(0,i.Z)({},a||E,Z?(0,o.Z)({},h,(0,i.Z)({},O,I)):I)}return(0,i.Z)({},a||E)}({filterKey:n,filterType:a,filterOptionId:l,filterOptionMin:p,filterOptionMax:d,filterOptionValueMin:Z,filterOptionValueMax:m,activeFilters:Y});h||v?P({activeFilters:y,shallow:O}):ne(y)}},filterClear:w,filterIsModalOpen:W,filterOpenModal:function(){$(!0)},filterCloseModal:y,filterSaveChanges:I,filterCancelChanges:R,filterHasChanged:ie,activeSortId:re,submittedSortId:ae,sortOnClick:function(e){var t=e.sortOptionId;e.shouldSendDataToServer||v?(P({activeFilters:(0,r.Z)((0,i.Z)({},Y),(0,o.Z)({},g.uR,t))}),b()):ne((0,r.Z)((0,i.Z)({},Y),(0,o.Z)({},g.uR,t)))},sortIsModalOpen:ue,sortOpenModal:function(){le(!0)},sortCloseModal:b,sortSaveChanges:x,sortCancelChanges:K,sortHasChanged:se,allIsModalOpen:ce,allOpenModal:function(){fe(!0)},allCloseModal:k,allSaveChanges:function(){x(),I(),k()},allCancelChanges:function(){K(),R(),k()},allClear:function(){w(),K(),k()},onSearch:ge,onPageChange:function(e){ve({newUrl:(0,c.setQueries)({queries:(0,o.Z)({},g.tn,e),url:window.location.href}),scroll:h,appendQuery:!0})},searchOnClearParam:function(){ge(E)},searchParam:L[g.fH],queryParams:L,reinitializeQueryParams:function(){pe()},urlParams:X,isReady:V,hasFilter:B,fragment:Ze,changeFragment:function(e){P({fragment:e,activeFilters:Y})}}}function R(e){var t=e.apiMethod,n=e.apiData,o=e.disabled,u=e.onSuccess,l=e.onError,s=e.itemsKey,d=e.isPagination,f=e.defaultActiveFilters,v=void 0===f?{}:f,g=e.defaultActiveSort,p=void 0===g?null:g,Z=e.shouldSaveOnChange,m=e.ssrData,h=e.shouldScrollOnChange,P=e.disableQueryParams,y=e.getSSRMethods,S=e.notHandledByUseSSR,M=I({defaultActiveFilters:v,defaultActiveSort:p,shouldSaveOnChange:Z,shouldScrollOnChange:h,disableQueryParams:P,isPagination:d}),C=(0,a.useMemo)((function(){var e;return y?null===y||void 0===y||null===(e=y({query:M.urlParams||{}}))||void 0===e?void 0:e[0]:{apiMethod:t,apiData:n}}),[M.isReady,M.urlParams,n]),E=S||!!t,R=O((0,r.Z)((0,i.Z)({},C),{queryParams:M.queryParams,disabled:o,notHandledByUseSSR:E,onSuccess:u,onError:l,onPageChange:M.onPageChange,itemsKey:s,isPagination:d,ssrData:(0,c.isArray)(m)?null===m||void 0===m?void 0:m[0]:m}));return(0,i.Z)({},R,M)}},57258:function(e,t,n){n.d(t,{V:function(){return d}});var i=n(29815),r=n(8100),a=n(11163),o=n(67294),u=n(61740),l=n(73286);function s(e){return function(t,n,i){var r=(0,o.useRef)(),a=e(t,n,i);(0,o.useEffect)((function(){void 0!==a.data&&(r.current=a.data)}),[a.data]);var u=(0,o.useCallback)((function(){r.current=void 0}),[]),l=void 0===a.data?r.current:a.data,s=void 0===a.data&&void 0!==r.current;return Object.assign({},a,{data:l,isLagging:s,resetLaggy:u})}}function d(e){var t=e.apiMethod,n=e.apiData,d=e.dependencies,c=e.onSuccess,f=void 0===c?function(){}:c,v=e.onError,g=void 0===v?function(){}:v,p=e.revalidateIfStale,Z=void 0!==p&&p,m=e.revalidateOnMount,h=void 0===m||m,O=e.revalidateOnFocus,P=void 0!==O&&O,y=e.revalidateOnReconnect,S=void 0!==y&&y,M=e.disabled,C=e.initialValue,E=M?"disabled":null===t||void 0===t?void 0:t.url,I=((0,l.isFunction)(E)?E(n):E)+(0,l.stringifyUrlParams)(n),R=(0,a.useRouter)().isReady&&!M,w=(0,u.b6)(),b=(0,o.useState)(C||{})[0],x=function(){return t(n)},K=(0,o.useMemo)((function(){return[I].concat((0,i.Z)(d||[]))}),[d,I]),k=(0,r.ZP)(R?K:null,x,{onError:g,revalidateIfStale:Z,revalidateOnMount:h,revalidateOnFocus:P,revalidateOnReconnect:S,fallbackData:b,use:[s],shouldRetryOnError:!1}),D=k.data,F=k.error,q=k.mutate,T=k.isValidating,Q=!F&&!D&&!!I&&!M||T&&!M;return(0,o.useEffect)((function(){!w&&!D||Q||null===f||void 0===f||f(D)}),[D,Q]),{data:D,pending:Q,hasError:!!F,reload:function(){return q(x)},setPageData:function(e){return q(e,!1)}}}t.Z=d}}]);
